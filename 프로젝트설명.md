## 프로젝트 개요

- 이름: workwork
- 목표: 시간 단위(1시간 단위)로 일정을 작성·관리하고 라벨 및 알림을 설정할 수 있는 server-derived todo 서비스
- 플랫폼: 모바일 웹 우선
- 구성: 모노레포(서버·클라이언트·공유 패키지)

## 핵심 기능

1. **인증**
   - 이메일 기반 로그인·회원가입
   - 로그인 사용자 세션 유지, 알림 대상 식별 토큰 관리
   - 알림 채널(푸시, 이메일 등) 동의 및 설정 수집
2. **달력 탐색**
   - 월간 달력: 스크롤로 이전/다음 달 이동, 날짜 선택 시 일간 뷰로 진입
   - 일간 카드: 일정 요약(상위 2~3개) 노출, “...”로 전체 보기, 스크롤로 다른 날짜 이동
   - 시간 블럭: 1시간 단위 네모 박스, 일정 CRUD, 라벨 지정, 알림 on/off
3. **라벨**
   - 사용자 정의 라벨 생성, 색상·아이콘·우선순위 관리
   - 라벨별 알림 기본값, 메모 템플릿, 표시 색상 등 커스터마이징
4. **알림**
   - 일정 시작 전 알림, 반복/재알림 옵션, 서버에서 푸시 또는 이메일 발송
   - 사용자·라벨·시간대별로 서로 다른 알림 설정 유지

## 기술 스택

- 서버: Node.js, Express, TypeScript, Postgres, BullMQ, Redis, Docker, ORM
- 클라이언트: React, TypeScript

## 서버 아키텍처 방향

- Express 기반 추상화 계층으로 미들웨어(인증, 검증, 로깅 등) 관리
- BullMQ/Redis를 활용해 알림 스케줄링 및 재시도 처리
- 공통 타입·DTO를 공유하는 모노레포 구조로 서버와 브라우저 간 계약을 명확히 유지

## 비즈니스 로직 포커스

- 일정 CRUD: 시간 블럭 단위 작성/수정/삭제, 라벨·알림 메타데이터 포함
- 라벨 관리: 사용자별 라벨 생성, 색상 규칙, 시각적 구분
- 알림 파이프라인: 일정 시작 전 알림 설정, on/off 토글에 따른 큐 동기화
- 뷰 동기화: 월→일→시간 뷰 간 동일 스크롤 UX와 상태 공유

## 설정/커스터마이징 고려사항

- 사용자 환경설정: 기본 라벨 세트, 기본 알림 템플릿, 주간 시작 요일 등
- 라벨 관리: 커스텀 라벨 생성/편집/비활성화, 색상 대비 자동 검증
- 알림 채널: 채널별 on/off, 미리 알림 시간대, 방해 금지 시간 설정
- 메모 규칙: 제목 없이 한 줄 메모만 입력하도록 UX 제공, 라벨에 따른 자동 태그 부여
- 다중 디바이스 동기화: 설정 변경 시 모든 디바이스에 실시간 반영

## 진행 우선순위

1. 도메인 모델 정의(사용자, 라벨, 일정, 알림)
2. API 계약 및 Express 추상 미들웨어 설계
3. 알림 큐 파이프라인 구현
4. 모바일 웹 달력/시간 블럭 UI 프로토타입 제작

## 페이지별 고려 기능

### 1. 로그인/회원가입
- 최소 입력(이메일·비밀번호)로 계정 생성, 비밀번호 재설정
- 소셜 로그인 확장 가능성 고려(토큰 저장, 알림 권한 연동)
- 서버 세션 혹은 JWT 발급, 갱신 토큰 처리
- 알림 전송을 위한 사용자별 디바이스 토큰·채널 동의 저장, 해지 처리
- 로그인 상태 유지 및 자동 재로그인 로직, 로그아웃 시 토큰 무효화

### 2. 월간 달력
- 무한 스크롤 또는 페이징으로 이전/다음 달 이동
- 날짜별 일정 개수 배지 표시, 오늘 날짜 강조
- 선택된 날짜 상태 유지, 일간 뷰와 동기화
- 월간 데이터 프리페치, 로딩 상태 관리
- 접근성(스크린리더, 키보드) 지원

### 3. 일간 카드
- 하루 일정 요약(상위 2~3개) 노출 및 “전체 보기” 확장
- 일정 생성 버튼, 드래그로 시간 블럭 직접 이동/수정(선택)
- 스크롤로 전/후 날짜 이동, 스와이프 제스처 지원
- 라벨 색상 및 알림 상태를 카드에서 즉시 확인
- 다중 일정 충돌 표시 및 해결 UX

### 4. 시간 블럭
- 1시간 단위 슬롯(필요 시 30분 단위 확장) CRUD
- 슬롯 내 입력은 제목 없이 단일 줄 메모만 허용, 빠른 기록 중심 UX
- 메모와 연결된 커스텀 라벨 선택/자동 추천, 라벨 생성 플로우와 연동
- 라벨 선택 시 색상 반영, 우선순위 기반 정렬
- 알림 시간 선택(시작 전 n분), BullMQ 큐 동기화
- 반복 일정, 드래그·리사이즈로 시간 변경, 충돌 감지
- 알림 채널별 상태 확인(푸시/이메일) 및 오류 재시도 표시

### 5. 설정 페이지
- 프로필·환경설정 탭으로 분리, 모바일 우선 UI
- 기본 라벨/알림 템플릿 지정, 주간 시작 요일 등 글로벌 옵션
- 라벨 생성/편집/삭제, 색상·아이콘·알림 기본값 지정, 비활성화 처리
- 알림 채널 on/off, 방해 금지 시간, 미리 알림 시간대 설정
- 디바이스별 푸시 토큰 관리, 알림 권한 재요청, 로그아웃 시 정리
- 데이터 백업/복원, 계정 삭제, 로그 확인 등 고급 설정

## MVP 범위

1. **인증**
   - 이메일 기반 회원가입/로그인, 비밀번호 재설정 메일
   - 단일 디바이스 세션 유지, 푸시 토큰 1개 저장
2. **달력 탐색**
   - 월간 달력 스크롤(이전/다음 달) 및 날짜 선택
   - 일간 카드에서 상위 3개 일정 표시, 전체 보기 모달
   - 시간 블럭 24칸(1시간 단위) CRUD, 단일 줄 메모 입력, 라벨 선택, 알림 on/off
3. **라벨**
   - 기본 제공 라벨 3~5개 + 사용자 정의 라벨 생성/삭제
   - 색상 선택 및 알림 기본값(켜짐/꺼짐)만 설정
4. **알림**
   - 단일 채널(푸시 또는 이메일) 선택, 일정 시작 10분 전 알림
   - 알림 on/off 토글과 BullMQ 큐 연동, 실패 시 1회 재시도
5. **설정**
   - 기본 라벨·알림 설정 편집, 주간 시작 요일 지정
   - 디바이스 푸시 권한 상태 확인 및 재요청
6. **기술**
   - 모노레포 구조 세팅, 공통 타입 공유
   - Express 추상 미들웨어(인증·검증·로깅) 1차 완성
   - Postgres 스키마(사용자/라벨/일정/알림)와 BullMQ 파이프라인 구축
